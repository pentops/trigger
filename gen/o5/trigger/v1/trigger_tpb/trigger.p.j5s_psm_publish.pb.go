// Code generated by protoc-gen-go-psm. DO NOT EDIT.

package trigger_tpb

import (
	context "context"
	psm "github.com/pentops/protostate/psm"
	trigger_pb "github.com/pentops/trigger/gen/o5/trigger/v1/trigger_pb"
)

// Publish Toipc for o5.trigger.v1.Trigger
func PublishTrigger() psm.EventPublishHook[
	*trigger_pb.TriggerKeys,    // implements psm.IKeyset
	*trigger_pb.TriggerState,   // implements psm.IState
	trigger_pb.TriggerStatus,   // implements psm.IStatusEnum
	*trigger_pb.TriggerData,    // implements psm.IStateData
	*trigger_pb.TriggerEvent,   // implements psm.IEvent
	trigger_pb.TriggerPSMEvent, // implements psm.IInnerEvent
] {
	return trigger_pb.TriggerPSMEventPublishHook(func(
		ctx context.Context,
		publisher psm.Publisher,
		state *trigger_pb.TriggerState,
		event *trigger_pb.TriggerEvent,
	) error {
		publisher.Publish(&TriggerEventMessage{
			Metadata: event.EventPublishMetadata(),
			Keys:     event.Keys,
			Event:    event.Event,
			Data:     state.Data,
			Status:   state.Status,
		})
		return nil
	})
}
